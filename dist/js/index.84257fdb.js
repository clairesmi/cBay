(function(t){function e(e){for(var s,o,n=e[0],l=e[1],c=e[2],m=0,d=[];m<n.length;m++)o=n[m],Object.prototype.hasOwnProperty.call(i,o)&&i[o]&&d.push(i[o][0]),i[o]=0;for(s in l)Object.prototype.hasOwnProperty.call(l,s)&&(t[s]=l[s]);u&&u(e);while(d.length)d.shift()();return r.push.apply(r,c||[]),a()}function a(){for(var t,e=0;e<r.length;e++){for(var a=r[e],s=!0,n=1;n<a.length;n++){var l=a[n];0!==i[l]&&(s=!1)}s&&(r.splice(e--,1),t=o(o.s=a[0]))}return t}var s={},i={index:0},r=[];function o(e){if(s[e])return s[e].exports;var a=s[e]={i:e,l:!1,exports:{}};return t[e].call(a.exports,a,a.exports,o),a.l=!0,a.exports}o.m=t,o.c=s,o.d=function(t,e,a){o.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:a})},o.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},o.t=function(t,e){if(1&e&&(t=o(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var a=Object.create(null);if(o.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var s in t)o.d(a,s,function(e){return t[e]}.bind(null,s));return a},o.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return o.d(e,"a",e),e},o.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},o.p="/";var n=window["webpackJsonp"]=window["webpackJsonp"]||[],l=n.push.bind(n);n.push=e,n=n.slice();for(var c=0;c<n.length;c++)e(n[c]);var u=l;r.push([0,"chunk-vendors"]),a()})({0:function(t,e,a){t.exports=a("911e")},"0383":function(t,e,a){"use strict";var s=a("9dc1"),i=a.n(s);i.a},"0a0f":function(t,e,a){},1:function(t,e){},"136c":function(t,e,a){},"1fb2":function(t,e,a){"use strict";var s=a("a010"),i=a.n(s);i.a},2:function(t,e){},2372:function(t,e,a){"use strict";var s=a("9e1e"),i=a.n(s);i.a},"261d":function(t,e,a){"use strict";var s=a("2c52"),i=a.n(s);i.a},"2c52":function(t,e,a){},"2fa4":function(t,e,a){"use strict";var s=a("bbdb"),i=a.n(s);i.a},3:function(t,e){},"3bb8":function(t,e,a){},4:function(t,e){},4097:function(t,e,a){"use strict";var s=a("eed6"),i=a.n(s);i.a},"57c1":function(t,e,a){},5882:function(t,e,a){"use strict";var s=a("57c1"),i=a.n(s);i.a},"5b04":function(t,e,a){},"81a6":function(t,e,a){"use strict";var s=a("9459"),i=a.n(s);i.a},8925:function(t,e,a){},"911e":function(t,e,a){"use strict";a.r(e),a.d(e,"eventBus",(function(){return Ce}));var s=a("2b0e"),i=a("8c4f"),r=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"h-screen bg-red-200",attrs:{id:"app"}},[a("navbar"),a("router-view",{key:t.$route.fullPath})],1)},o=[],n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"text-gray-800 bg-red-200",attrs:{id:"navbar"}},[a("nav",{staticClass:"flex flex-row justify-between pl-5 pr-5 pt-2",attrs:{toggleable:"sm",type:"light",variant:"light"}},[a("router-link",{attrs:{to:"/"}},[t._v("Home")]),t.isLoggedIn?a("div",{staticClass:"link-wrapper flex flex-row"},[a("div",{staticClass:"pr-3"},[a("router-link",{attrs:{to:"/items"}},[t._v("Go to Listings")])],1),a("div",{staticClass:"pr-3"},[a("router-link",{attrs:{to:"/items/new"}},[t._v("New Listing")])],1),a("div",{staticClass:"pr-3"},[a("router-link",{attrs:{to:"/profile"}},[t._v("Your Profile")])],1),a("div",{staticClass:"pr-5 pl-2"},[a("router-link",{attrs:{to:"/basket"}},[a("div",{staticClass:"flex justify-center items-center basket-count text-xs bg-orange-600"},[a("p",{staticClass:"text-white"},[t._v(t._s(t.itemsInBasket))])]),a("p",{staticClass:"text-xl"},[t._v("ðŸ›’")])])],1),a("div",{staticClass:"text-orange-600 pr-3"},[a("a",{on:{click:t.handleLogout}},[t._v("Logout")])])]):t._e(),t.isLoggedIn?t._e():a("div",{staticClass:"link-wrapper flex flex-row"},[a("div",{staticClass:"pr-3"},[a("router-link",{attrs:{to:"/register"}},[t._v("Sign Up")])],1),a("div",{staticClass:"pr-3"},[a("router-link",{attrs:{to:"/login"}},[t._v("Login")])],1)])],1)])},l=[];class c{static setToken(t){localStorage.setItem("token",t)}static getToken(){return localStorage.getItem("token")}static logout(){localStorage.removeItem("token")}static getPayload(){const t=this.getToken();if(!t)return!1;const e=t.split(".");return!(e.length<3)&&JSON.parse(atob(e[1]))}static isAuthenticated(){const t=this.getPayload();if(!t)return!1;const e=Math.round(Date.now()/1e3);return e<t.exp}}var u=c,m={name:"navbar",data(){return{isLoggedIn:null,itemsInBasket:0}},methods:{handleLogout(){u.logout(),this.isLoggedIn=this.isAuth(),this.$router.push("/items")},isAuth(){return u.isAuthenticated()}},created(){Ce.$on("userLoggedIn",()=>{this.isLoggedIn=this.isAuth()}),Ce.$on("basketUpdated",()=>{this.itemsInBasket+=1}),Ce.$on("removedFromBasket",()=>{this.itemsInBasket-=1}),Ce.$on("calculatedBasket",t=>{this.itemsInBasket=t})}},d=m,p=(a("261d"),a("2877")),h=Object(p["a"])(d,n,l,!1,null,"a97d9338",null),g=h.exports,f=(a("53dd"),{name:"App",components:{Navbar:g}}),v=f,x=Object(p["a"])(v,r,o,!1,null,null,null),b=x.exports,y=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"h-screen flex flex-col font-sans bg-red-200",attrs:{id:"home"}},[a("div",{staticClass:"title-wrapper h-56 flex justify-center flex items-center"},[a("router-link",{attrs:{to:"/items"}},[a("h1",{staticClass:"cbay-title animated zoomInDown cbay-title tracking-wide text-orange-600"},[t._v(" cBay ")])])],1),t._m(0),a("div",{staticClass:"carousel-wrapper flex flex-col justify-center"},[a("div",{staticClass:"categories-index flex flex-row items-center justify-center w-screen"},[a("button",{staticClass:"left-button text-2xl m-10 text-orange-600",attrs:{id:"left-button",disabled:t.leftButtonDisabled},on:{click:t.handleClick}},[t._v(" â† ")]),t.previousCategory?a("router-link",{attrs:{to:{name:"category-show",params:{id:this.previousCategory.id,catName:this.previousCategory.name}}}},[t.previousCategory?a("div",{staticClass:"previous-category m-4 text-6xl text-gray-800 w-12/12 bg-white p-3 flex flex-col justify-center items-center"},[a("img",{staticClass:"h-48 w-12/12",attrs:{src:this.previousCategory.image,alt:t.previousCategory.name}}),a("p",{staticClass:"image-text text-4xl"},[t._v(t._s(t.previousCategory.name))])]):t._e()]):t._e(),t.currentCategory?a("router-link",{attrs:{to:{name:"category-show",params:{id:this.currentCategory.id,catName:this.currentCategory.name}}}},[t.currentCategory?a("div",{staticClass:"current-category m-4 text-6xl text-gray-800 w-12/12 bg-white p-4 flex flex-col justify-center items-center"},[a("img",{staticClass:"h-64 w-12/12",attrs:{src:this.currentCategory.image,alt:t.currentCategory.name}}),a("p",{staticClass:"image-text text-4xl"},[t._v(t._s(t.currentCategory.name))])]):t._e()]):t._e(),t.nextCategory?a("router-link",{attrs:{to:{name:"category-show",params:{id:this.nextCategory.id,catName:this.nextCategory.name}}}},[t.nextCategory?a("div",{staticClass:"next-category m-4 text-6xl text-gray-800 w-12/12 bg-white p-3 flex flex-col justify-center items-center"},[a("img",{staticClass:"h-48 w-12/12",attrs:{src:this.nextCategory.image,alt:t.nextCategory.name}}),a("p",{staticClass:"image-text text-4xl"},[t._v(t._s(t.nextCategory.name))])]):t._e()]):t._e(),a("button",{staticClass:"right-button text-2xl m-10 text-orange-600",attrs:{id:"right-button",disabled:t.rightButtonDisabled},on:{click:t.handleClick}},[t._v(" â†’ ")])],1)])])},_=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"cbay-description flex justify-center flex items-center text-gray-800 pt-2 pb-2"},[a("p",[t._v("Buy and sell unwanted clothes with cBay! Sign up to get started...")])])}],w=a("bc3a"),C=a.n(w),k=(a("77ed"),{name:"home",data(){return{categories:null,previousCategory:null,currentCategory:null,nextCategory:null,leftButtonDisabled:!1,rightButtonDisabled:!1}},async mounted(){await this.getCategories(),this.mapCarouselCategories()},methods:{async getCategories(){try{const t=await C.a.get("/api/categories");this.categories=t.data}catch(t){this.$router.push("/notfound")}},mapCarouselCategories(){let t=1;const e=this.categories.map((t,e)=>({id:e+1,index:e,name:t.name,image:t.category_image}));this.carouselCategories=e,this.currentCategory=this.carouselCategories[t],this.previousCategory=this.carouselCategories[t-1],this.nextCategory=this.carouselCategories[t+1]},handleClick(){let t,e=this.previousCategory.index,a=this.currentCategory.index,s=this.nextCategory.index;const i=document.querySelector(".current-category");t=setTimeout((function(){i.classList.add("animated","pulse"),setTimeout((function(){i.classList.remove("animated","pulse")}),700)}),100),"right-button"===event.target.id&&this.currentCategory.index<this.carouselCategories.length-1&&this.nextCategory.index!==this.carouselCategories.length-1&&(this.currentCategory=this.carouselCategories[a+=1],this.previousCategory=this.carouselCategories[e+=1],this.nextCategory=this.carouselCategories[s+=1]),"left-button"===event.target.id&&this.currentCategory.index>0&&0!==this.previousCategory.index&&(this.currentCategory=this.carouselCategories[a-=1],this.previousCategory=this.carouselCategories[e-=1],this.nextCategory=this.carouselCategories[s-=1]),this.nextCategory.index===this.carouselCategories.length-1?this.rightButtonDisabled=!0:this.rightButtonDisabled=!1,0===this.previousCategory.index?this.leftButtonDisabled=!0:this.leftButtonDisabled=!1}}}),$=k,j=(a("9b50"),Object(p["a"])($,y,_,!1,null,null,null)),S=j.exports,I=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"flex flex-col justify-center items-center font-sans bg-red-200",attrs:{id:"items-index"}},[a("h1",{staticClass:"animated zoomInDown listings-title tracking-wide text-orange-600"},[t._v(" All Listings ")]),a("form",{staticClass:" flex justify-center w-full text-gray-800"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.searchTerm,expression:"searchTerm"}],staticClass:"listings-search mt-5 w-1/3",attrs:{placeholder:" search by keyword"},domProps:{value:t.searchTerm},on:{input:function(e){e.target.composing||(t.searchTerm=e.target.value)}}})]),a("div",{staticClass:"flex flex-row flex-wrap justify-around p-5"},t._l(t.listingSearch(),(function(e){return a("div",{key:e.id,staticClass:" item-card flex p-5 bg-white mb-5"},[e.available?a("div",{staticClass:"flex flex-col flex-wrap"},[a("router-link",{attrs:{to:{name:"item-show",params:{id:e.id}}}},[a("img",{attrs:{src:e.image,alt:"image-card"}})]),a("div",{staticClass:"flex flex-row justify-around pt-8"},[a("h3",[t._v(t._s(e.name))]),a("div",[t._v("Size: "+t._s(e.size))]),a("h3",[t._v("$"+t._s(e.price.toFixed(2)))])])],1):a("div",{staticClass:"unavailable-items-wrapper item-card flex flex-col flex-wrap"},[a("img",{attrs:{src:e.image,alt:"image-card"}}),a("div",{staticClass:"flex flex-row justify-around pt-8"},[a("h3",[t._v(t._s(e.name))]),a("div",[t._v("Size: "+t._s(e.size))]),a("h4",[t._v("$"+t._s(e.price.toFixed(2)))]),a("div",[t._v(t._s(e.available?"Available":"*SOLD*"))])])])])})),0)])},z=[],P={name:"items-index",data(){return{items:[],searchTerm:"",filteredItems:[]}},async mounted(){await this.getItems()},methods:{async getItems(){try{const t=await C.a.get("/api/items");this.items=t.data.sort((t,e)=>e.available-t.available)}catch(t){this.$router.push("/notfound")}},listingSearch(){const{items:t,searchTerm:e}=this,a=new RegExp(e,"i");return t.filter(t=>a.test(t.name)).sort((t,e)=>e.available-t.available)}}},O=P,B=(a("2fa4"),Object(p["a"])(O,I,z,!1,null,"af9a457a",null)),D=B.exports,L=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{attrs:{id:"item-new"}},[t.item?a("item-form",{attrs:{item:t.item,categories:t.categories,value:t.value},on:{"submit-clicked":t.handleSubmit,"multi-select-input":t.handleMultiSelect}}):t._e()],1)},T=[],E=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"h-screen flex flex-col items-center bg-red-200",attrs:{id:"item-form"}},[a("h1",{staticClass:"animated zoomInDown user-form-title text-6xl tracking-wide text-orange-600 mb-24"},[t._v(" "+t._s(t.$route.path.includes("new")?"Add a new listing!":"Update your listing!")+" ")]),a("div",{staticClass:"form-wrapper h-full w-2/4 flex bg-red-200"},[a("form",{staticClass:"flex flex-col w-full justify-around p-40 text-gray-900 bg-red-200"},[a("label",[t._v("Name")]),a("input",{directives:[{name:"model",rawName:"v-model",value:t.item.name,expression:"item.name"}],attrs:{type:"text",placeholder:"Product name",required:"required"},domProps:{value:t.item.name},on:{input:function(e){e.target.composing||t.$set(t.item,"name",e.target.value)}}}),a("label",[t._v("Price")]),a("input",{directives:[{name:"model",rawName:"v-model",value:t.item.price,expression:"item.price"}],attrs:{type:"number",placeholder:"0.00",step:"0.01",required:"required"},domProps:{value:t.item.price},on:{input:function(e){e.target.composing||t.$set(t.item,"price",e.target.value)}}}),a("label",[t._v("Size")]),a("input",{directives:[{name:"model",rawName:"v-model",value:t.item.size,expression:"item.size"}],attrs:{type:"text",placeholder:"Product size",required:"required"},domProps:{value:t.item.size},on:{input:function(e){e.target.composing||t.$set(t.item,"size",e.target.value)}}}),a("label",[t._v("Image")]),a("image-upload",{on:{"image-upload":function(e){t.item.image=e}}}),a("label",[t._v("Categories")]),a("div",[a("multiselect",{attrs:{options:t.categories,multiple:!0,"track-by":"name",label:"name",placeholder:"Select item categories"},on:{input:t.multiSelectInput},scopedSlots:t._u([{key:"singleLabel",fn:function(e){var a=e.option;return[t._v(t._s(a.name))]}}]),model:{value:t.updatedValue,callback:function(e){t.updatedValue=e},expression:"updatedValue"}}),a("pre",{staticClass:"categories-chosen"},[a("code",[t._v(t._s(t.value?t.value.name:null))])])],1),a("button",{staticClass:"form-button mt-2 bg-red-200",on:{click:function(e){return e.preventDefault(),t.submitClicked(e)}}},[t._v("List your Item")])],1)])])},q=[],U=a("8e5f"),N=a.n(U),A=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{attrs:{id:"image-upload"}},[a("input",{attrs:{id:"files",type:"file",placeholder:"Upload Image"},on:{change:t.handleUpload}}),a("div",{staticClass:"h-24"},[t.thumbnail?a("img",{staticClass:"h-16 w-16",attrs:{src:this.thumbnail}}):t._e(),t.loading?a("img",{staticClass:"h-24 w-24 flex justify-center items-center",attrs:{src:"https://media.giphy.com/media/L05HgB2h6qICDs5Sms/giphy.gif"}}):t._e()])])},M=[],F={name:"image-upload",props:{image:String},data(){return{thumbnail:"",loading:!1}},mounted(){},methods:{async handleUpload({target:{files:t}}){this.loading=!0;const e=new FormData;e.append("file",t[0]),e.append("upload_preset","qpedrr5c");const a=await C.a.post("https://api.cloudinary.com/v1_1/dpmupgnig/image/upload",e);this.thumbnail=a.data.secure_url,this.$emit("image-upload",a.data.secure_url),this.loading=!1}}},R=F,V=Object(p["a"])(R,A,M,!1,null,"6d29501f",null),Y=V.exports,G={name:"item-form",components:{ImageUpload:Y,Multiselect:N.a},props:{item:Object,categories:Array,value:Array},data(){return{updatedValue:this.$props.value}},methods:{submitClicked(){this.$emit("submit-clicked")},multiSelectInput(){this.$emit("multi-select-input",this.updatedValue),console.log(this.$route.path.includes("add"))}}},H=G,J=(a("b17b"),Object(p["a"])(H,E,q,!1,null,"1da87127",null)),W=J.exports,X={name:"item-new",components:{ItemForm:W},data(){return{item:{name:"",price:"",size:"",available:!0,image:""},categories:[],value:null}},mounted(){this.getCategories()},methods:{async getCategories(){try{const t=await C.a.get("/api/categories");this.categories=t.data}catch(t){this.$router.push("/notfound")}},handleMultiSelect(t){if(!t)return this.item={...this.item,categories:[]};this.item={...this.item,categories:t.map(t=>t.id)}},async handleSubmit(){try{await C.a.post("/api/items",this.item),this.$router.push("/profile")}catch(t){this.$router.push("/notfound")}}}},K=X,Q=(a("60bc"),Object(p["a"])(K,L,T,!1,null,"2104c428",null)),Z=Q.exports,tt=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"bg-red-200 h-full",attrs:{id:"item-show"}},[t.item?a("div",{staticClass:"show-page-wrapper flex flex-row justify-center h-full w-full bg-red-200 pt-5"},[a("div",{staticClass:"product-wrapper flex flex-row justify-center w-5/5 mb-20"},[a("div",{staticClass:"flex flex-col w-3/5 bg-white items-start justify-center items-center mr-5 pr-5 pl-5"},[a("h1",{staticClass:"item-show-header pr-5"},[t._v(t._s(t.item.name))]),a("img",{attrs:{src:t.item.image,alt:"item-image"}}),t.item.price?a("h3",{staticClass:"item-show-header"},[t._v(" $"+t._s(t.item.price.toFixed(2))+" ")]):t._e()]),a("div",{staticClass:"bg-red-100 h-full w-2/5 flex flex-col pl-5 pr-5 pt-10 pb-10 mr-5 justify-between text-gray-800"},[a("div",{staticClass:"details-wrapper h-full flex flex-col justify-start"},[a("h4",{staticClass:"title flex pb-1"},[t._v(" Size: "),a("p",{staticClass:"detail pl-1"},[t._v(t._s(t.item.size))])]),a("div",{staticClass:"item-category-header flex flex-col"},[t.item.categories?a("p",{staticClass:"pr-1 title"},[t._v(" "+t._s(t.item.categories.length>1?"Categories":"Category")+": ")]):t._e(),t._l(t.item.categories,(function(e){return a("p",{key:e.name,staticClass:"detail detail-link pb-1"},[e.name?a("router-link",{attrs:{to:"/categories/"+e.id+"/"+e.name}},[t._v(t._s(e.name.slice(0,1).toUpperCase()+e.name.slice(1)))]):t._e()],1)}))],2),t.item.owner?a("router-link",{attrs:{to:"/profile/"+t.item.owner.id+"/"}},[a("h4",{staticClass:"title flex"},[t._v(" Posted by: "),a("p",{staticClass:"detail-link detail pl-1"},[t._v(t._s(t.item.owner.username))])])]):t._e()],1),a("div",{staticClass:"buttons-wrapper flex flex-col items-center pb-20"},[t.isOwner?t._e():a("div",{staticClass:"add-to-basket-wrapper flex justify-center mt-20"},[t.item.available?a("button",{staticClass:"button text-gray-900",on:{click:function(e){return e.preventDefault(),t.addToBasket(e)}}},[t._v(" Add to Basket ðŸ›’ ")]):t._e()]),t.isOwner?a("div",{staticClass:"item-delete"},[a("button",{staticClass:"button text-gray-900",on:{click:function(e){return e.preventDefault(),t.handleDelete(e)}}},[t._v(" Delete this item ")]),a("router-link",{attrs:{to:"/items/"+t.item.id+"/edit"}},[a("button",{staticClass:"button text-gray-900"},[t._v("Edit this item")])])],1):t._e()])])]),a("div",{staticClass:"others-in-category flex flex-col items-start justify-start w-1/5 pt-2 mb-20 bg-red-300"},[a("div",{staticClass:"flex pt-3 pl-2"},[t.othersInCategory.length?a("h3",{staticClass:"title-others text-orange-600"},[t._v(" Other items you might like: ")]):a("h3",{staticClass:"title-others text-orange-600 pl-5"},[t._v(" More items coming soon! ")])]),t.othersInCategory?a("div",{staticClass:"flex flex-col justify-start items-center h-full w-full pt-3"},t._l(t.othersInCategory,(function(e){return a("div",{key:e.id,staticClass:"flex flex-col h-48 m-4 pt-3 pr-2 pb-2 pl-2 bg-white items-center"},[a("router-link",{attrs:{to:"/items/"+e.id+"/"}},[a("img",{staticClass:"small-image",attrs:{src:e.image,alt:e.name}})]),a("div",{staticClass:"small-image-text flex pb-2 pt-1 justify-around items-center"},[a("p",{staticClass:"pr-1"},[t._v("Size: "+t._s(e.size))]),a("p",[t._v("$"+t._s(e.price.toFixed(2)))])])],1)})),0):t._e()])]):t._e(),t.loginModal?a("div",[a("div",{staticClass:"login-modal flex",on:{click:function(e){t.loginModal=!1}}},[a("div",{staticClass:"modal-text bg-white flex flex-col justify-around items-center text-orange-600 pl-5"},[a("div",{staticClass:"flex w-full h-full justify-end items-start pt-5 pr-5 text-gray-800"},[a("button",{staticClass:"button flex justify-start items-start h-10",on:{click:function(e){t.loginModal=!1}}},[a("p",{staticClass:"h-5 text-lg mb-1"},[t._v("X")])])]),a("p",{staticClass:"pb-20"},[t._v("You must be logged in to fill your basket!")]),a("div",{staticClass:"mb-20 text-gray-800 pb-3"},[a("router-link",{attrs:{to:"/register"}},[a("button",{staticClass:"button text-gray-900 mr-2"},[t._v("Sign Up")])]),a("router-link",{attrs:{to:"/login"}},[a("button",{staticClass:"button text-gray-900 ml-2"},[t._v("Login")])])],1)])])]):t._e()])},et=[],at={name:"item-show",data(){return{item:{},othersInCategory:[],isOwner:!1,loginModal:!1}},async mounted(){await this.getItem(),this.isOwnerCheck(),console.log(u.getPayload().sub)},methods:{async getItem(){try{const t=await C.a.get("/api"+this.$route.path);this.item=t.data;const e=this.item.categories.map(t=>t.items.filter(t=>t.id!==parseInt(this.$route.params.id)));this.othersInCategory=e[0].filter(t=>t.available)}catch(t){this.$router.push("/notfound")}},isOwnerCheck(){if(!this.item.owner)return null;this.isOwner=u.getPayload().sub===this.item.owner.id},async addToBasket(){if(u.getPayload().sub){const e=u.getPayload().sub;console.log(e);const a={...this.item,basket:e,available:!1,owner:this.item.owner.id,categories:this.item.categories.map(t=>t.id)};this.item=a,console.log(this.item);try{await C.a.patch(`/api${this.$route.path}/`,this.item),this.$router.push("/items")}catch(t){this.$router.push("/notfound")}}else this.loginModal=!0;Ce.updateBasket()},async handleDelete(){try{await C.a.delete("/api"+this.$route.path,{headers:{Authorization:"Bearer "+u.getToken()}}),this.$router.push("/items")}catch(t){this.$router.push("/notfound")}}}},st=at,it=(a("1fb2"),Object(p["a"])(st,tt,et,!1,null,"ec77aa16",null)),rt=it.exports,ot=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{attrs:{id:"item-edit"}},[t.item?a("item-form",{attrs:{item:t.item,categories:t.categories,value:t.value},on:{"submit-clicked":t.handleSubmit,"multi-select-input":t.handleMultiSelect}}):t._e()],1)},nt=[],lt={name:"item-edit",components:{ItemForm:W},data(){return{item:{name:"",price:"",size:"",available:!0,image:""},categories:[],value:[]}},mounted(){this.getItem(),this.getCategories()},methods:{async getItem(){const t=this.$route.params.id,e=await C.a.get("/api/items/"+t);this.item=e.data},async getCategories(){try{const t=await C.a.get("/api/categories");this.categories=t.data}catch(t){this.$router.push("/notfound")}},async handleSubmit(){const t=this.$route.params.id,e={...this.item,owner:this.item.owner.id};this.item=e,console.log(this.item);try{await C.a.patch(`/api/items/${t}/`,this.item),this.$router.push("/profile")}catch(a){this.$router.push("/notfound")}},handleMultiSelect(t){if(console.log(t),!t)return this.item={...this.item};this.item={...this.item,categories:t.map(t=>t.id)},console.log(this.item)}}},ct=lt,ut=Object(p["a"])(ct,ot,nt,!1,null,"68e52438",null),mt=ut.exports,dt=function(){var t=this,e=t.$createElement;t._self._c;return t._m(0)},pt=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{attrs:{id:"categories-index"}},[a("div",[a("h1",[t._v("Catgeories Index")])])])}],ht={name:"categories-index"},gt=ht,ft=Object(p["a"])(gt,dt,pt,!1,null,"e9b9316c",null),vt=ft.exports,xt=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:" flex flex-col justify-center items-center font-sans bg-red-200",attrs:{id:"category-show"}},[t.category?a("h1",{staticClass:"animated zoomInDown category-title tracking-wide text-orange-600"},[t._v(t._s(t.header.slice(0,1).toUpperCase()+t.header.slice(1)))]):t._e(),a("div",{staticClass:"flex w-3/6 justify-center items-center bg-white"},[a("form",{staticClass:"flex w-3/6"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.searchTerm,expression:"searchTerm"}],staticClass:"w-full",attrs:{placeholder:" search by keyword"},domProps:{value:t.searchTerm},on:{input:[function(e){e.target.composing||(t.searchTerm=e.target.value)},function(e){return e.preventDefault(),t.listingSearch(e)}]}})]),a("multiselect",{staticClass:"pr-20 w-2/4",attrs:{options:t.sizes,multiple:!0,placeholder:"Filter by size"},on:{input:t.listingSearch},scopedSlots:t._u([{key:"singleLabel",fn:function(e){var a=e.option;return[t._v(t._s(a))]}}]),model:{value:t.selectedSizes,callback:function(e){t.selectedSizes=e},expression:"selectedSizes"}})],1),t.category.length?a("div",{staticClass:"flex flex-row flex-wrap justify-around p-5"},t._l(t.listingSearch(),(function(e){return a("div",{key:e.id,staticClass:"item-card flex flex-col p-5 bg-white m-5"},[e.available?a("div",[a("router-link",{attrs:{to:"/items/"+e.id+"/"}},[a("img",{attrs:{src:e.image}})]),a("div",{staticClass:"flex flex-row justify-around pt-8"},[a("h2",[t._v(t._s(e.name))]),a("h3",[t._v("$"+t._s(e.price.toFixed(2)))]),a("h4",[t._v("Size: "+t._s(e.size))])])],1):a("div",{staticClass:"unavailable-items-wrapper item-card flex flex-col flex-wrap"},[a("img",{attrs:{src:e.image,alt:"image-card"}}),a("div",{staticClass:"flex flex-row justify-around pt-8"},[a("h3",[t._v(t._s(e.name))]),a("div",[t._v("Size: "+t._s(e.size))]),a("h4",[t._v("$"+t._s(e.price.toFixed(2)))]),a("div",[t._v(t._s(e.available?"Available":"*SOLD*"))])])])])})),0):t._e(),t.category.length?a("div",[t.listingSearch().length?t._e():a("div",{staticClass:"flex flex-col items-center"},[a("h1",{staticClass:"not-found-header p-5 text-orange-600"},[t._v("Sorry...")]),a("p",{staticClass:"not-found-text text-gray-800"},[t._v("We don't currently have anything that matches your search criteria")]),a("p",{staticClass:"not-found-text text-gray-800"},[t._v("Please try another search!")])])]):t._e()])},bt=[],yt={name:"category-show",components:{Multiselect:N.a},data(){return{category:[],header:this.$route.params.catName,searchTerm:"",sizes:[],selectedSizes:[],filteredItems:[]}},async mounted(){this.getCategory()},methods:{async getCategory(){try{const t=await C.a.get("/api/categories/"+this.$route.params.id);this.category=t.data.items,console.log(this.category),this.sizes=this.category.reduce((t,e)=>(t.includes(e.size)||t.push(e.size),t),[])}catch(t){this.$router.push("/notfound")}},listingSearch(){const{category:t,searchTerm:e,selectedSizes:a}=this,s=new RegExp(e,"i");return t.filter(e=>s.test(e.name)&&a.length?a.includes(e.size):s.test(e.name)&&t)}}},_t=yt,wt=(a("c6f1"),Object(p["a"])(_t,xt,bt,!1,null,"a18862ca",null)),Ct=wt.exports,kt=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"flex flex-col items-center h-full",attrs:{id:"login"}},[a("h1",{staticClass:"animated zoomInDown user-form-title text-6xl tracking-wide text-orange-600 mt-10 mb-10"},[t._v("Login!")]),a("div",{staticClass:"form-wrapper h-64 w-2/4 flex"},[a("form",{staticClass:"flex flex-col w-full justify-around p-40 text-gray-900",on:{submit:function(e){return e.preventDefault(),t.handleSubmit(e)}}},[a("label",[t._v("Email")]),a("input",{directives:[{name:"model",rawName:"v-model",value:t.data.email,expression:"data.email"}],attrs:{placeholder:" email",name:"email",type:"text",required:"required"},domProps:{value:t.data.email},on:{input:function(e){e.target.composing||t.$set(t.data,"email",e.target.value)}}}),a("label",[t._v("Password")]),a("input",{directives:[{name:"model",rawName:"v-model",value:t.data.password,expression:"data.password"}],attrs:{placeholder:" password",name:"password",type:"password",required:"required"},domProps:{value:t.data.password},on:{input:function(e){e.target.composing||t.$set(t.data,"password",e.target.value)}}}),a("label",[t._v("Confirm your password")]),a("input",{directives:[{name:"model",rawName:"v-model",value:t.data.password_confirmation,expression:"data.password_confirmation"}],attrs:{placeholder:" password confirmation",name:"password_confirmation",type:"password",required:"required"},domProps:{value:t.data.password_confirmation},on:{input:function(e){e.target.composing||t.$set(t.data,"password_confirmation",e.target.value)}}}),a("button",{staticClass:"form-button mt-5",attrs:{type:"submit"}},[t._v("Submit")])])])])},$t=[],jt={name:"login",data(){return{data:{}}},methods:{async handleSubmit(){try{const t=await C.a.post("/api/login",this.data);u.setToken(t.data.token),this.$router.push("/profile"),Ce.loginCheck()}catch(t){this.$router.push("/notfound")}}}},St=jt,It=Object(p["a"])(St,kt,$t,!1,null,"2ae928f4",null),zt=It.exports,Pt=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"flex flex-col items-center h-full",attrs:{id:"register"}},[a("h1",{staticClass:"animated zoomInDown user-form-title text-6xl tracking-wide text-orange-600 mt-10 mb-10"},[t._v("Sign Up!")]),a("div",{staticClass:"form-wrapper h-64 w-2/4 flex"},[a("form",{staticClass:"flex flex-col w-full justify-around p-40 text-gray-900",on:{submit:function(e){return e.preventDefault(),t.handleSubmit(e)}}},[a("label",[t._v("Username")]),a("input",{directives:[{name:"model",rawName:"v-model",value:t.data.username,expression:"data.username"}],attrs:{placeholder:" username",name:"username",type:"text",required:"required"},domProps:{value:t.data.username},on:{input:function(e){e.target.composing||t.$set(t.data,"username",e.target.value)}}}),a("label",[t._v("Email")]),a("input",{directives:[{name:"model",rawName:"v-model",value:t.data.email,expression:"data.email"}],attrs:{placeholder:" email",name:"email",type:"text",required:"required"},domProps:{value:t.data.email},on:{input:function(e){e.target.composing||t.$set(t.data,"email",e.target.value)}}}),a("label",[t._v("Password")]),a("input",{directives:[{name:"model",rawName:"v-model",value:t.data.password,expression:"data.password"}],attrs:{placeholder:" password",name:"password",type:"password",required:"required"},domProps:{value:t.data.password},on:{input:function(e){e.target.composing||t.$set(t.data,"password",e.target.value)}}}),a("label",[t._v("Confirm your password")]),a("input",{directives:[{name:"model",rawName:"v-model",value:t.data.password_confirmation,expression:"data.password_confirmation"}],attrs:{placeholder:" password confirmation",name:"password_confirmation",type:"password",required:"required"},domProps:{value:t.data.password_confirmation},on:{input:function(e){e.target.composing||t.$set(t.data,"password_confirmation",e.target.value)}}}),a("button",{staticClass:"form-button mt-5",attrs:{type:"submit"}},[t._v("Submit")])])])])},Ot=[],Bt={name:"register",data(){return{data:{username:"",email:"",password:"",password_confirmation:""}}},methods:{async handleSubmit(){console.log(this.data);try{await C.a.post("/api/register",this.data),this.$router.push("/login")}catch(t){console.log(t)}}}},Dt=Bt,Lt=(a("5882"),Object(p["a"])(Dt,Pt,Ot,!1,null,null,null)),Tt=Lt.exports,Et=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"flex flex-col items-center w-full h-full bg-red-200",attrs:{id:"profile"}},[a("h1",{staticClass:"animated zoomInDown user-form-title text-6xl tracking-wide text-orange-600 mb-5"},[t._v(" Profile Page ")]),t.user?a("div",{staticClass:"profile-wrapper flex w-full h-full justify-center items-center bg-red-200"},[a("div",{staticClass:"profile-name flex w-10/12 justify-center h-full p-5 bg-red-100 text-gray-800"},[a("div",{staticClass:"flex flex-col w-1/3 items-center"},[a("h1",{staticClass:"username text-gray-800"},[t._v("Hello "+t._s(t.user.username))]),a("p",{staticClass:"pb-2"},[t._v("Registered email: "+t._s(t.user.email))]),t.user.profile_image?a("img",{attrs:{src:t.user.profile_image}}):t._e(),a("router-link",{attrs:{to:"/profile/edit"}},[a("button",{staticClass:"form-button mt-5"},[t._v(" Edit your profile ")])])],1),a("div",{staticClass:"listings-wrapper flex flex-col w-1/3 items-center"},[a("h2",{staticClass:"pb-2"},[t._v("Your Listings")]),t._l(t.listings,(function(e){return a("div",{key:e.id,staticClass:"flex flex-col items-center listing bg-white p-3 mb-3"},[a("p",[t._v(t._s(e.name))]),a("router-link",{attrs:{to:"/items/"+e.id}},[a("img",{attrs:{src:e.image}})]),a("p",[t._v("Â£"+t._s(e.price))]),a("p",[t._v("Size: "+t._s(e.size))]),a("p",[t._v(t._s(e.available?"Available":"Sold"))])],1)}))],2),a("div",{staticClass:"purchased-items-wrapper flex flex-col w-1/3 h-full items-center"},[a("h2",{staticClass:"pb-2"},[t._v("Your Purchases")]),t._l(t.purchasedItems,(function(e){return a("div",{key:e.id,staticClass:"flex flex-col items-center listing bg-white p-3 mb-3"},[a("p",[t._v(t._s(e.name))]),a("img",{attrs:{src:e.image}}),a("p",[t._v("Â£"+t._s(e.price))]),a("p",[t._v("Size: "+t._s(e.size))]),a("router-link",{attrs:{to:"/profile/"+e.owner.id+"/"}},[a("p",[t._v("Sold by: "+t._s(e.owner.username))])])],1)}))],2)])]):t._e()])},qt=[],Ut={name:"profile",data(){return{user:null,listings:[],purchasedItems:[]}},async mounted(){await this.getUser(),this.getListings(),this.getPurchasedItems()},methods:{async getUser(){try{const t=await C.a.get("/api/profile",{headers:{Authorization:"Bearer "+u.getToken()}});this.user=t.data}catch(t){this.$router.push("/notfound")}},async getListings(){try{const t=await C.a.get("/api/listings",{headers:{Authorization:"Bearer "+u.getToken()}});this.listings=t.data}catch(t){this.$router.push("/notfound")}},async getPurchasedItems(){try{const t=await C.a.get("api/purchased");this.purchasedItems=t.data.filter(t=>t.purchased===this.user.id)}catch(t){this.$router.push("/notfound")}}}},Nt=Ut,At=(a("2372"),Object(p["a"])(Nt,Et,qt,!1,null,"6d773ec5",null)),Mt=At.exports,Ft=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"h-screen flex flex-col items-center bg-red-200",attrs:{id:"profile-edit"}},[a("h1",{staticClass:"animated zoomInDown user-form-title text-6xl tracking-wide text-orange-600 mb-16"},[t._v("Edit your profile")]),t.user?a("div",{staticClass:"form-wrapper h-full w-2/4 flex"},[a("form",{staticClass:"flex flex-col w-full justify-around p-40 text-gray-900"},[a("label",[t._v("Username: ")]),a("input",{directives:[{name:"model",rawName:"v-model",value:t.user.username,expression:"user.username"}],staticClass:"disabled",attrs:{type:"text",placeholder:"Username",required:"required",disabled:"disabled"},domProps:{value:t.user.username},on:{input:function(e){e.target.composing||t.$set(t.user,"username",e.target.value)}}}),a("label",[t._v("Email Address:")]),a("input",{directives:[{name:"model",rawName:"v-model",value:t.user.email,expression:"user.email"}],attrs:{type:"text",placeholder:"email address",required:"required"},domProps:{value:t.user.email},on:{input:function(e){e.target.composing||t.$set(t.user,"email",e.target.value)}}}),a("label",[t._v("Profile Picture:")]),a("image-upload",{on:{"image-upload":function(e){t.user.profile_image=e}}}),a("button",{staticClass:"form-button mt-2",on:{click:function(e){return e.preventDefault(),t.submitClicked(e)}}},[t._v("Submit")])],1)]):t._e()])},Rt=[],Vt={name:"profile-edit",components:{ImageUpload:Y},data(){return{user:null}},mounted(){this.getUser()},methods:{async getUser(){try{const t=await C.a.get("/api/profile");this.user=t.data}catch(t){this.$router.push("/notfound")}},async submitClicked(){try{await C.a.put("/api/profile",this.user),this.$router.push("/profile")}catch{this.$router.push("/notfound")}}}},Yt=Vt,Gt=(a("4097"),Object(p["a"])(Yt,Ft,Rt,!1,null,"71be2d32",null)),Ht=Gt.exports,Jt=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"flex flex-col items-center h-full w-full bg-red-200",attrs:{id:"profile-view"}},[t.userListings?a("h1",{staticClass:"animated zoomInDown user-form-title text-6xl tracking-wide text-orange-600 mb-5 pb-10 bg-red-200"},[t._v(" "+t._s(t.userListings[0].owner.username)+"'s listings")]):t._e(),t.userListings?a("div",{staticClass:"profile-view-wrapper flex flex-wrap w-full h-auto justify-center items-center bg-red-200"},[t.userListings[0].owner.profile_image?a("img",{attrs:{src:t.userListings[0].owner.profile_image,alt:"profile-image"}}):t._e(),t._l(t.userListings,(function(e){return a("div",{key:e.id,staticClass:"flex"},[e.available?a("div",{staticClass:"listings-body w-7/8 flex flex-col justify-center h-full m-3 p-4 bg-red-100 text-gray-800"},[a("router-link",{attrs:{to:"/items/"+e.id}},[a("img",{attrs:{src:e.image}})]),a("div",{staticClass:"listing-text flex flex-col justify-center itmes-center w-full pt-1"},[a("p",[t._v(t._s(e.name))]),a("p",[t._v("Â£"+t._s(e.price))]),a("p",[t._v("Size "+t._s(e.size))])])],1):t._e()])}))],2):t._e()])},Wt=[],Xt={name:"profile-view",data(){return{userListings:null}},mounted(){this.getUserProfile()},methods:{async getUserProfile(){try{const t=await C.a.get(`/api/${this.$route.path}/`);this.userListings=t.data}catch(t){this.$router.push("/notfound")}}}},Kt=Xt,Qt=(a("81a6"),Object(p["a"])(Kt,Jt,Wt,!1,null,"e48fbc9c",null)),Zt=Qt.exports,te=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"flex flex-col items-center h-screen bg-red-200",attrs:{id:"basket"}},[t._m(0),t.items.length?a("div",{staticClass:"basket-wrapper w-2/5 flex-col justify-center pb-5 text-gray-900 bg-red-200 h-full"},t._l(t.items,(function(e){return a("div",{key:e.id,staticClass:"item-info flex justify-start items-center bg-white mb-2"},[a("div",[a("router-link",{attrs:{to:"/items/"+e.id+"/"}},[a("img",{staticClass:"item-image mr-10",attrs:{src:e.image,alt:"item-image"}})])],1),a("div",[a("h3",[t._v(t._s(e.name))]),a("p",[t._v("$"+t._s(e.price))]),a("p",[t._v("Size: "+t._s(e.size))]),e.owner?a("router-link",{attrs:{to:"/profile/"+e.owner.id+"/"}},[e.owner?a("h4",{staticClass:"flex"},[t._v(" Listed by: "),a("p",{staticClass:"detail-link detail pl-1"},[t._v(t._s(e.owner.username))])]):t._e()]):t._e(),a("button",{staticClass:"button",attrs:{id:e.id},on:{click:t.removeCheck}},[t._v(" Remove from basket ")])],1)])})),0):a("div",{staticClass:"basket-empty flex flex-col items-center h-full text-gray-900 bg-red-200"},[a("h1",[t._v("Your basket is empty...")]),a("router-link",{attrs:{to:"/items"}},[a("p",{staticClass:"basket-empty-link"},[t._v("Go back to listings")])])],1),a("div",{staticClass:"flex flex-col w-full flex justify-center items-center bg-red-200 pb-12"},[a("h2",{staticClass:"total flex justify-center items-center p-2 pl-5 pr-5 text-gray-900 w-2/4"},[a("p",[t._v("Total: $"+t._s(t.total))]),t.items.length?a("router-link",{staticClass:"flex flex-col justify-center items-center w-2/4",attrs:{to:"/checkout"}},[a("button",{staticClass:"button w-2/4 bg-red-100 text-gray-900"},[t._v(" Go to checkout ")])]):t._e()],1)]),t.modalShow?a("div",[a("div",{staticClass:"check-modal",on:{click:function(e){t.modalShow=!1}}},[a("div",{staticClass:"modal-text flex bg-white flex flex-col justify-around items-center text-orange-600 pl-5"},[a("div",{staticClass:"flex w-full h-full justify-end items-start pt-5 pr-5 text-gray-800"},[a("button",{staticClass:"button flex justify-start items-start h-10",on:{click:function(e){t.modalShow=!1}}},[a("p",{staticClass:"h-5 text-lg mb-1"},[t._v("X")])])]),a("p",{staticClass:"pb-20"},[t._v(" Are you sure you want to remove this item from your basket? ")]),a("div",{staticClass:"mb-20 text-gray-800 pb-3"},[a("button",{staticClass:"button text-gray-900 mr-2",attrs:{id:t.item.id},on:{click:t.handleRemove}},[t._v(" Yes ")]),a("button",{staticClass:"button text-gray-900 ml-2",attrs:{id:t.item.id},on:{click:t.handleRemove}},[t._v(" No ")])])])])]):t._e()])},ee=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"basket-headers flex flex-col items-center h-full bg-red-200"},[a("h1",{staticClass:"animated zoomInDown basket-title text-6xl tracking-wide text-orange-600 mt-10"},[t._v(" What's in your basket? ")])])}],ae={name:"basket",data(){return{items:{},modalShow:!1,item:{},total:null}},async mounted(){await this.getBasket(),this.calculateTotal()},methods:{async getBasket(){try{const t=await C.a.get("/api/basket");this.items=t.data.filter(t=>t.basket===u.getPayload().sub)}catch(t){this.$router.push("/notfound")}},async removeCheck(){const t=await C.a.get(`api/items/${event.target.id}/`);this.item=t.data,this.modalShow=!this.modalShow},async handleRemove(){if("No"===event.target.innerText)this.modalShow=!this.modalShow;else{const e=this.item.owner;this.total-=this.item.price;const a={...this.item,basket:null,available:!0,owner:e.id,categories:this.item.categories.map(t=>t.id)};this.item=a;try{await C.a.patch(`/api/items/${this.item.id}/`,this.item),this.getBasket()}catch(t){this.$router.push("/notfound")}}Ce.removeFromBasket()},calculateTotal(){const t=this.items.map(t=>t.price);this.total=t.reduce((t,e)=>t+e,0).toFixed(2)}},created(){Ce.$on("userLoggedIn",()=>{Ce.calculateBasket(this.items.length)})}},se=ae,ie=(a("0383"),Object(p["a"])(se,te,ee,!1,null,"4ff10188",null)),re=ie.exports,oe=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"flex flex-col items-center",attrs:{id:"checkout"}},[a("h1",{staticClass:"animated zoomInDown checkout-title text-6xl tracking-wide text-orange-600 mt-10 mb-10"},[t._v(" Checkout ")]),a("h2",{staticClass:"total"},[t._v("Total: Â£"+t._s(t.total))]),a("div",{staticClass:"flex justify-center mt-6 w-full"},[a("button",{staticClass:"w-1/4 button bg-red-100",on:{click:t.makePayment}},[t._v(" Make Payment ")])]),a("div",{staticClass:"flex justify-center mt-3 w-full"},[a("router-link",{staticClass:"flex justify-center w-full",attrs:{to:"/basket"}},[a("button",{staticClass:"w-1/4 button bg-red-100"},[t._v(" Back to Basket ")])])],1)])},ne=[],le={name:"checkout",data(){return{items:[],total:"",currentUserID:null}},async mounted(){this.currentUserID=await u.getPayload().sub,await this.getItems(),this.getTotal()},methods:{async getItems(){try{const t=await C.a.get("api/basket");this.items=t.data.filter(t=>t.basket===this.currentUserID)}catch(t){this.$router.push("/notfound")}},getTotal(){const t=this.items.map(t=>t.price);this.total=t.reduce((t,e)=>t+e,0).toFixed(2)},async makePayment(){const t=this.items.map(t=>({...t,owner:t.owner,purchased:this.currentUserID,basket:null,categories:t.categories.map(t=>t)}));try{await t.map(t=>C.a.patch(`/api/items/${t.id}/`,{...t})),console.log(t),this.$router.push("/profile")}catch(e){this.$router.push("/notfound")}}}},ce=le,ue=(a("ab03"),Object(p["a"])(ce,oe,ne,!1,null,"36adae62",null)),me=ue.exports,de=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"h-screen flex flex-col justify-center items-center font-sans bg-red-200 text-orange-600",attrs:{id:"not-found"}},[a("h1",{staticClass:"error-header p-5"},[t._v("Oops!")]),a("h2",{staticClass:"error-text"},[t._v("Something went wrong...")]),a("router-link",{attrs:{to:"/"}},[a("p",{staticClass:"error-text"},[t._v("Go back to homepage")])])],1)},pe=[],he={},ge=he,fe=(a("c8e7"),Object(p["a"])(ge,de,pe,!1,null,"70787569",null)),ve=fe.exports;s["a"].use(i["a"]);const xe="history",be="/",ye=[{path:"/checkout",component:me},{path:"/basket",component:re},{path:"/items/new",component:Z},{path:"/items/:id/edit",component:mt},{path:"/items/:id/",component:rt,name:"item-show"},{path:"/items",component:D},{path:"/categories/:id/:catName",component:Ct,name:"category-show"},{path:"/categories",component:vt},{path:"/login",component:zt},{path:"/register",component:Tt},{path:"/profile/edit",component:Ht},{path:"/profile/:id",component:Zt},{path:"/profile",component:Mt},{path:"/",component:S},{path:"/notfound",component:ve}],_e=new i["a"]({routes:ye,mode:xe,base:be});var we=_e;a("3bb8");s["a"].use(i["a"]);const Ce=new s["a"]({methods:{loginCheck(){this.$emit("userLoggedIn")},updateBasket(){this.$emit("basketUpdated")},removeFromBasket(){this.$emit("removedFromBasket")},calculateBasket(t){this.$emit("calculatedBasket",t)}}});new s["a"]({render:t=>t(b),router:we,components:{App:b,VueRouter:i["a"]}}).$mount("#app")},9459:function(t,e,a){},"9b50":function(t,e,a){"use strict";var s=a("afac"),i=a.n(s);i.a},"9dc1":function(t,e,a){},"9e1e":function(t,e,a){},a010:function(t,e,a){},ab03:function(t,e,a){"use strict";var s=a("136c"),i=a.n(s);i.a},afac:function(t,e,a){},b17b:function(t,e,a){"use strict";var s=a("8925"),i=a.n(s);i.a},bbdb:function(t,e,a){},c6f1:function(t,e,a){"use strict";var s=a("0a0f"),i=a.n(s);i.a},c8e7:function(t,e,a){"use strict";var s=a("5b04"),i=a.n(s);i.a},eed6:function(t,e,a){}});
//# sourceMappingURL=index.84257fdb.js.map